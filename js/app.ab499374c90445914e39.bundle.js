(self.webpackChunk=self.webpackChunk||[]).push([[524],{44(e,t,n){const i=n(377),{lightningChart:s,PointSeriesTypes3D:l,PointStyle3D:a,ColorRGBA:o,SolidFill:r,SolidLine:d,IndividualPointFill:c,htmlTextRenderer:h,PointShape:y,emptyLine:u}=i;let x=!1,m=[],p=0;const g=5e4;let S=null,v=4236,w=2040,f=-2251;const b=document.getElementById("chart")||document.body;b===document.body&&(b.style.width="100vw",b.style.height="100vh",b.style.margin="0px");const L=s({resourcesBaseUrl:new URL(document.head.baseURI).origin+new URL(document.head.baseURI).pathname+"resources/"}),A=document.createElement("div");b.append(A);const P=L.Chart3D({container:A,legend:{visible:!1},textRenderer:h,theme:Themes[new URLSearchParams(window.location.search).get("theme")||"darkGold"]||void 0}).setTitle("3D view — select a point to update 2D slices").setTitleMargin(0).setBoundingBox({x:100,y:60,z:100}).setCursorMode(void 0);A.style.position="absolute",A.style.right="0px",A.style.top="0px",A.style.width="50%",A.style.height="50%",P.getDefaultAxisX().setTitle("Width (X)"),P.getDefaultAxisY().setTitle("Height (Y)"),P.getDefaultAxisZ().setTitle("Depth (Z)"),P.setCursorDynamicBehavior({pointMarkerStroke:()=>new d({thickness:2,fillStyle:new r({color:o(255,0,0)})})});const k=P.addLineSeries().setCursorEnabled(!1).setStrokeStyle(new d({thickness:4,fillStyle:new r({color:o(255,0,0)})})),D=P.addLineSeries().setCursorEnabled(!1).setStrokeStyle(new d({thickness:4,fillStyle:new r({color:o(255,0,0)})})),T=P.addLineSeries().setCursorEnabled(!1).setStrokeStyle(new d({thickness:4,fillStyle:new r({color:o(255,0,0)})})),C=document.createElement("div");b.append(C);const z=L.ChartXY({container:C,defaultAxisY:{type:"linear-highPrecision"},legend:{visible:!1},textRenderer:h,theme:Themes[new URLSearchParams(window.location.search).get("theme")||"darkGold"]||void 0}).setTitle("Width vs Depth").setUserInteractions(void 0).setCursorMode(void 0);C.style.position="absolute",C.style.left="0px",C.style.top="0px",C.style.width="50%",C.style.height="50%";const Y=z.getDefaultAxisX().setTitle("Width (X)"),E=z.getDefaultAxisY().setTitle("Depth (Z)"),X=z.addPointSeries({schema:{x:{pattern:null},y:{pattern:null},color:{pattern:null}}}).setPointStrokeStyle(u).setPointFillStyle(new c).setPointShape(y.Triangle).setPointSize(3).setMaxSampleCount(g),I=document.createElement("div");b.append(I);const U=L.ChartXY({container:I,defaultAxisY:{type:"linear-highPrecision"},legend:{visible:!1},textRenderer:h}).setTitle("Width vs Height").setUserInteractions(void 0).setCursorMode(void 0);I.style.position="absolute",I.style.left="0px",I.style.top="50%",I.style.width="50%",I.style.height="50%";const R=U.getDefaultAxisX().setTitle("Width (X)"),H=U.getDefaultAxisY().setTitle("Height (Y)"),W=U.addPointSeries({schema:{x:{pattern:null},y:{pattern:null},color:{pattern:null}}}).setPointStrokeStyle(u).setPointFillStyle(new c).setPointShape(y.Triangle).setPointSize(3).setMaxSampleCount(g),Z=document.createElement("div");b.append(Z);const V=L.ChartXY({container:Z,defaultAxisY:{type:"linear-highPrecision"},legend:{visible:!1},textRenderer:h}).setTitle("Depth vs Height").setUserInteractions(void 0).setCursorMode(void 0);Z.style.position="absolute",Z.style.right="0px",Z.style.top="50%",Z.style.width="50%",Z.style.height="50%";const F=V.getDefaultAxisX().setTitle("Depth (Z)"),M=V.getDefaultAxisY().setTitle("Height (Y)"),B=V.addPointSeries({schema:{x:{pattern:null},y:{pattern:null},color:{pattern:null}}}).setPointStrokeStyle(u).setPointFillStyle(new c).setPointShape(y.Triangle).setPointSize(3).setMaxSampleCount(g),O=new d({thickness:2,fillStyle:new r({color:o(255,0,0)})}),N=Y.addConstantLine({legend:{visible:!0}}).setStrokeStyle(O);N.addEventListener("valuechange",e=>{te("xAxisWDLine",e.value)});const G=E.addConstantLine({legend:{visible:!0,onTop:!1}}).setStrokeStyle(O);G.addEventListener("valuechange",e=>{te("yAxisWDLine",e.value)});const J=R.addConstantLine({legend:{visible:!0}}).setStrokeStyle(O);J.addEventListener("valuechange",e=>{te("xAxisWHLine",e.value)});const q=H.addConstantLine({legend:{visible:!0,onTop:!1}}).setStrokeStyle(O);q.addEventListener("valuechange",e=>{te("yAxisWHLine",e.value)});const $=F.addConstantLine({legend:{visible:!0}}).setStrokeStyle(O);$.addEventListener("valuechange",e=>{te("xAxisDHLine",e.value)});const j=M.addConstantLine({legend:{visible:!0,onTop:!1}}).setStrokeStyle(O);j.addEventListener("valuechange",e=>{te("yAxisDHLine",e.value)});const K=async(e,t)=>{const n=await fetch(new URL(document.head.baseURI).origin+new URL(document.head.baseURI).pathname+`examples/assets/1710/${e}`),i=await n.blob(),s=await i.arrayBuffer();let d=0;const h=new Uint32Array(s.slice(d,d+4))[0];d+=4;const y=new Array(h).fill(0).map(e=>({})),u=2*h,x=new Int16Array(s.slice(d,d+u));d+=u,x.forEach((e,t)=>y[t].x=e);const m=2*h,g=new Int16Array(s.slice(d,d+m));d+=m,g.forEach((e,t)=>y[t].y=e);const v=2*h,w=new Int16Array(s.slice(d,d+v));if(d+=v,w.forEach((e,t)=>y[t].z=e),t){const e=1*h,t=new Uint8Array(s.slice(d,d+e));d+=e;const n=1*h,i=new Uint8Array(s.slice(d,d+e));d+=n;const l=1*h,a=new Uint8Array(s.slice(d,d+e));d+=l,t.forEach((e,t)=>{y[t].color=o(e,i[t],a[t])})}else{const e=o(220,220,220);y.forEach(t=>{t.color=e})}const f=P.addPointSeries({type:l.Pixelated,individualPointColorEnabled:!0}).add(y);switch(e){case"buildings.bin":f.setName("Buildings").setPointStyle(new a.Pixelated({size:1,fillStyle:new r({color:o(220,220,220)})}));break;case"green.bin":f.setName("Vegetation").setPointStyle(new a.Pixelated({size:1,fillStyle:new c})),P.legend.setEntryOptions(f,{markerFillStyle:new r({color:o(0,64,0)})})}if(p+=h,!S&&y.length>0){const e=y[0];S={minX:e.x,maxX:e.x,minY:e.y,maxY:e.y,minZ:e.z,maxZ:e.z}}for(let e=0;e<y.length;e++){const t=y[e];t.x<S.minX&&(S.minX=t.x),t.x>S.maxX&&(S.maxX=t.x),t.y<S.minY&&(S.minY=t.y),t.y>S.maxY&&(S.maxY=t.y),t.z<S.minZ&&(S.minZ=t.z),t.z>S.maxZ&&(S.maxZ=t.z)}return{series3D:f,dataPoints:y}};Promise.all([K("buildings.bin",!1),K("green.bin",!0)]).then(e=>{e.forEach(e=>{const t=e.dataPoints;for(let e=0;e<t.length;e++)m.push(t[e]);(()=>{const e=(e,t)=>{const n=0*(t-e||1);return{start:e-n,end:t+n}},t=e(S.minX,S.maxX),n=e(S.minY,S.maxY),i=e(S.minZ,S.maxZ);Y.setInterval(t),E.setInterval(i),R.setInterval(t),H.setInterval(n),F.setInterval(i),M.setInterval(n)})(),ne(),Q(),e.series3D.addEventListener("click",(e,t)=>{v=t.x,w=t.y,f=t.z,ne(),Q()})})}).catch(e=>{console.error("An error occurred during file loading:",e)});const Q=()=>{N.setValue(v),G.setValue(f),J.setValue(v),q.setValue(w),$.setValue(f),j.setValue(w),_("x",v),_("y",w),_("z",f)},_=(e,t)=>{const n=ee(e,t);switch(e){case"x":B.clear(),B.appendJSON(n),V.setTitle("Depth vs Height — X slice at "+t.toFixed(0));break;case"y":X.clear(),X.appendJSON(n),z.setTitle("Width vs Depth — Y slice at "+t.toFixed(0));break;case"z":W.clear(),W.appendJSON(n),U.setTitle("Width vs Height — Z slice at "+t.toFixed(0))}},ee=(e,t)=>{let n,i;"x"===e?(n="z",i="y"):"y"===e?(n="x",i="z"):(n="x",i="y");const s=t-50,l=t+50,a=[];for(let t=0;t<m.length;t++){const o=m[t],r=o[e];if(r>=s&&r<=l&&(a.push({x:o[n],y:o[i],color:o.color}),a.length>=g))break}return a},te=(e,t)=>{if(x)return;x=!0;let n="";switch(e){case"xAxisWDLine":case"xAxisWHLine":v=t,N.setValue(t),J.setValue(t),n="x";break;case"yAxisWHLine":case"yAxisDHLine":w=t,q.setValue(t),j.setValue(t),n="y";break;case"yAxisWDLine":case"xAxisDHLine":f=t,G.setValue(t),$.setValue(t),n="z"}n?(ne(),requestAnimationFrame(()=>{_(n,t),x=!1})):x=!1},ne=()=>{k.clear(),D.clear(),T.clear(),k.add([{x:S.minX,y:w,z:f},{x:S.maxX,y:w,z:f}]),D.add([{x:v,y:S.minY,z:f},{x:v,y:S.maxY,z:f}]),T.add([{x:v,y:w,z:S.minZ},{x:v,y:w,z:S.maxZ}])}}},e=>{e.O(0,[502],()=>e(e.s=44)),e.O()}]);